<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>闭包</title>
		<script>
			
			var name1 = "the window1";
			var obj1 = {
				name1:'my object1',
				getNameFunc:function(){
					return function(){
						return this.name1;
					}
				}
			}
			
			var name2 = "the window2";
			var obj2 = {
				name2:'my object2',
				getNameFunc:function(){
					var that = this;
					return function(){
						return that.name2;
					}
				}
			}
			
			alert(obj1.getNameFunc()()); // the window1
			// 当调用obj1.getNameFunc()时,此时返回了一个匿名函数,此函数被赋值到了全局变量中,也就是在window中
			// 假设为result = obj1.getNameFunc();
			// 此时再调用result(),就相当于window.result();匿名函数中的this指向了window!!
			// 所以弹出的是 the window1
			
			alert(obj2.getNameFunc()()); // my object2
			// 当调用obj2.getNameFunc()时,此时返回了一个匿名函数,此函数被赋值到了全局变量中,也就是在window中
			// 假设为result = obj1.getNameFunc();
			// 但是在obj2.getNameFunc()中定义了that = this; that指向了obj2
			// 由于返回的result中需要使用到that,所以that一直没被销毁
			// 当再次调用result()时,此时的that.name2当然是弹出my object2了.
		</script>
	</head>
	<body>
	</body>
</html>
